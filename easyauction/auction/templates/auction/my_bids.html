{% extends "auction/base2.html" %}

# Sets page title
{% block title %}My Bids{% endblock %}

{% block content %}
<form method="GET">
    {% csrf_token %}
    <v-row>
        <v-col cols="4">
            <input type="hidden" name="filter" :value="[[selected_filter]]">
            <v-select
                    :items="filters"
                    label="Filter"
                    v-model="selected_filter"
            >
            </v-select>
        </v-col>
        <v-col cols="4">
            <input type="hidden" name="order" :value="[[selected_ordering]]">
            <v-select
                    :items="orderings"
                    label="Order by"
                    v-model="selected_ordering"
            >
            </v-select>
        </v-col>
        <v-col cols="4">
            <v-btn color="primary" type="submit">Submit</v-btn>
        </v-col>
    </v-row>
</form>
    {% if object_list %}
        <v-row align="center" justify="space-around">
            <v-col cols="4">
                <v-list>
                    {% for bid in object_list %}
                        <v-list-item
                                href="{% url 'auction:item' bid.item.pk %}"
                                style="border: 5px solid #3F51B5; border-radius: 8px;"
                        >
                            <v-list-item-content>
                                <v-list-item-title>Bid on {{ bid.item.name }} for ${{ bid.price }}</v-list-item-title>
                                <v-list-item-subtitle>Auction: {{ bid.item.auction.name }}<br>
                                                      Placed on {{ bid.timestamp }}
                                </v-list-item-subtitle>
                            </v-list-item-content>
                        </v-list-item>
                    {% endfor %}
                </v-list>
            </v-col>
        </v-row>
    {% else %}
        <v-row>
            <v-col cols="12">
                <v-card href="{% url 'auction:enter_local_code' %}">
                    <v-card-title>You haven't placed any bids yet.</v-card-title>
                    <v-card-text>Join an auction and start bidding!</v-card-text>
                </v-card>
            </v-col>
        </v-row>
    {% endif %}
{% endblock %}

{% block vue %}
    <script>

    Vue.use(Vuetify);

    assorted_vue = new Vue({
        el: '#app',
        vuetify: new Vuetify(),
        data: {
            drawer: false,
            filters: {{ filters|safe }},
            selected_filter: null,
            orderings: {{ orderings|safe }},
            selected_ordering: null
        },
        delimiters: ["[[", "]]"]
    });
    </script>
{% endblock %}
